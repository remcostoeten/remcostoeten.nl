---
title: "Create aesthetic number animation"
publishedAt: "04-10-2025"
author: "Remco Stoeten"
tags: ["React", "Animation", "UX", "Accessibility", "TypeScript"]
category: "development"
status: "published"
---

Animations are hard. Bezier curves are hard. Luckily for use, librarys like motion exist. But even with motion the same problem remains: timing, bezier curves, sequences are hard. I came across [this](https://number-flow.barvian.me/) gem.

In essence a dead simple api
```tsx
import NumberFlow from '@number-flow/react'

<NumberFlow value={123} />
```
Which will give you this result:

<AnimatedNumberDemo />
It's an excelent [package](https://github.com/barvian/number-flow) which does provide more than enough options in the api for most usecases. Althrough, getting it to work with your own non-dummy data can be frustrating.

Since my second name is "_abstraction_", I obviously opted for a abstraction around the package which solves some small things and makes my life, and who knows yours easier. My version: 

We'll get into real usecases latter.<small>Source can be seen [](https://github.com/remcostoeten/remcostoeten.nl/tree/master/apps/frontend/src/shared/components/animated-numbers.tsx)here.</small>



## Usage Examples

```tsx
import { AnimatedNumber } from '@/components/ui/animated-number'

// Basic counter
<AnimatedNumber value={counter} />

// Currency formatting
<AnimatedNumber value={9999.99} format="currency" decimals={2} />

// Percentage display
<AnimatedNumber value={0.75} format="percentage" decimals={1} />

// With dramatic reveal effect
<AnimatedNumber
  value={5000}
  randomStart={true}
  randomRange={2000}
/>

## Code Block Height Limiting

You can now limit the height of code blocks in MDX using these syntaxes:

### Syntax 1: Language with height
```tsx 300px
// This code block will have a maximum height of 300px
// and will scroll if the content is longer

function MyComponent() {
  return (
    <div>
      <h1>Hello World</h1>
      <p>This is a very long component with lots of content...</p>
      <p>More content here...</p>
      <p>Even more content...</p>
      <p>And even more...</p>
      <p>This keeps going...</p>
      <p>Until it exceeds 300px...</p>
    </div>
  );
}
```

### Syntax 2: Language with max=height
```typescript max=400px
// This TypeScript code block will be limited to 400px height
interface User {
  id: number;
  name: string;
  email: string;
  preferences: {
    theme: 'light' | 'dark';
    notifications: boolean;
    language: string;
  };
}

class UserService {
  private users: User[] = [];

  async getUser(id: number): Promise<User | null> {
    return this.users.find(user => user.id === id) || null;
  }

  async updateUser(id: number, updates: Partial<User>): Promise<User | null> {
    const userIndex = this.users.findIndex(user => user.id === id);
    if (userIndex === -1) return null;

    this.users[userIndex] = { ...this.users[userIndex], ...updates };
    return this.users[userIndex];
  }
}
```
```
```

## Features That Matter

### Motion Preferences
```ts
<AnimatedNumber
  value={42}
  />
```

No more seizure-inducing animations for users who need reduced motion. The component automatically detects and respects the user's accessibility preferences.

### Multiple Formats
```tsx
// Currency
<AnimatedNumber value={2999.99} format="currency" decimals={2} />

// Percentage
<AnimatedNumber value={0.85} format="percentage" decimals={1} />

// Custom decimal places
<AnimatedNumber value={3.14159} format="decimal" decimals={3} />
```

### Dramatic Reveals
```tsx
<AnimatedNumber
  value={5000}
  randomStart={true}
  randomRange={2000}
/>
// Starts at a random value between 3000-7000, then animates to 5000
// Perfect for "Wow, look at this big number!" moments
```

### Locale Support
```tsx
<AnimatedNumber
  value={1234567.89}
  locale="de-DE"
  format="currency"
/>
// Shows: 1.234.567,89 € (German formatting)
```

## Under the Hood

The component uses NumberFlow's Web Animations API under the hood, which means:
- **60fps smooth animations** on modern browsers
- **Hardware acceleration** where possible
- **No layout thrashing** - animations don't trigger reflows
- **Memory efficient** - cleans up animations properly

## Real-World Usage

```tsx
// Blog post view counter
<AnimatedNumber
  value={post.views}
  format="number"
  className="text-2xl font-bold text-accent"
/>

// E-commerce price updates
<AnimatedNumber
  value={product.price}
  format="currency"
  decimals={2}
  locale="en-US"
/>

// Progress indicators
<AnimatedNumber
  value={completionPercentage}
  format="percentage"
  decimals={1}
/>
```

## Why Not Just Use CSS?

You could animate numbers with CSS transitions, but:

- **No accessibility**: CSS animations don't respect motion preferences
- **Poor performance**: CSS transitions on text changes cause repaints
- **Limited control**: Hard to customize easing and formatting
- **Browser inconsistencies**: Different animation behaviors across browsers

## The Code

Here's the component in all its glory:

```tsx
"use client"
import { useEffect, useState } from "react"
import NumberFlow from "@number-flow/react"
import { useCanAnimate, usePrefersReducedMotion } from "@number-flow/react"
import { cn } from "@/lib/utils"

export function AnimatedNumber({
  value,
  prefix = "",
  suffix = "",
  format = "number",
  decimals = 0,
  locale = "en-US",
  className,
  respectMotionPreference = true,
  // ... other props
}: TProps) {
  const canAnimate = useCanAnimate({ respectMotionPreference })
  const prefersReducedMotion = usePrefersReducedMotion()

  if (!canAnimate || prefersReducedMotion) {
    return (
      <span className={className}>
        {prefix}
        {value.toLocaleString(locale, FORMAT_CONFIG[format](decimals))}
        {suffix}
      </span>
    )
  }

  return (
    <NumberFlow
      value={value}
      format={FORMAT_CONFIG[format](decimals)}
      locales={locale}
      prefix={prefix}
      suffix={suffix}
      className={cn(className)}
    />
  )
}
```

## Installation

```bash
npm install @number-flow/react
# That's it! One dependency for all your animation needs
```

## Performance Notes

The component is surprisingly lightweight:
- **Bundle size**: ~3KB gzipped
- **Runtime cost**: Minimal - only animates when values change
- **Memory usage**: Cleans up animations automatically
- **Battery friendly**: Respects motion preferences

## When to Use It

- **Counters and statistics** that update frequently
- **Price displays** in e-commerce (with dramatic reveals)
- **Progress indicators** and completion percentages
- **Dashboard metrics** that need to feel alive
- **Any number that benefits from motion**

## When NOT to Use It

- **Static numbers** that never change
- **Content that needs to be copy-paste friendly**
- **Situations where reduced motion is critical**

## The Result

You get numbers that feel alive, respect user preferences, work across all devices, and integrate seamlessly into your React app. No more boring, static counters!

Sometimes the simplest improvements – making numbers dance – can make your entire app feel more polished and engaging. Give it a try in your next project.
